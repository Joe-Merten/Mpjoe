########################################################################################################################
# CI Buildkonfiguration für travis.org
#-----------------------------------------------------------------------------------------------------------------------
# \project    Mpjoe
# \file       .travis.yml
# \creation   2015-01-31, Joe Merten
########################################################################################################################

language: java
jdk: oraclejdk7
env:
  matrix:
    - ANDROID_TARGET=android-19 ANDROID_ABI=armeabi-v7a
before_install:
  # Install base Android SDK
  - echo "===================================================================================================="
  - echo "ANDROID_HOME = $ANDROID_HOME"
  - echo "git rev = $(../Common/make/gitversion)"
  - git status
  - ls -l
  - echo "===================================================================================================="
  - sudo apt-get update -qq
  - if [ "$(uname -m)" = "x86_64" ]; then sudo apt-get install -qq --force-yes libgd2-xpm ia32-libs ia32-libs-multiarch >/dev/null; fi
  - wget http://dl.google.com/android/android-sdk_r23.0.2-linux.tgz
  - tar xzf android-sdk_r23.0.2-linux.tgz
  - export ANDROID_HOME=$PWD/android-sdk-linux
  - export PATH=${PATH}:${ANDROID_HOME}/tools:${ANDROID_HOME}/platform-tools

  # Install required components.
  # For a full list, run `android list sdk -a --extended`
  - echo yes | android update sdk --filter platform-tools               --no-ui --force  >/dev/null
  - echo yes | android update sdk --all --filter build-tools-21.1.1     --no-ui --force  >/dev/null
  - echo yes | android update sdk --filter android-21                   --no-ui --force  >/dev/null
# - echo yes | android update sdk --filter sysimg-19                    --no-ui --force  >/dev/null
  - echo yes | android update sdk --filter extra-android-support        --no-ui --force  >/dev/null
  - echo yes | android update sdk --filter extra-android-m2repository   --no-ui --force  >/dev/null
install:
  - cd Ci
  - ./travis-build.sh
  - cd ..
before_test:
  - echo "Nichts zu tun für before_test"
script:
  - cd Ci
  - ./travis-test.sh
  - cd ..
